<div class="p-6 lg:p-10 animate__animated animate__fadeIn animate__faster">
    <div class="max-w-7xl mx-auto space-y-6">

        <!-- Header -->
        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div>
                <p class="text-gray-500 text-sm">{{ 'SUPPLIERS.DESCRIPTION' | translate }}</p>
            </div>
            <button *ngIf="!showForm" (click)="openCreateForm()"
                class="inline-flex items-center gap-2 px-5 py-2.5 bg-emerald-500 text-white font-semibold rounded-xl hover:bg-emerald-600 shadow-lg shadow-emerald-200 transition-all duration-200 hover:shadow-emerald-300 hover:-translate-y-0.5 active:translate-y-0">
                <i class="fas fa-plus text-sm"></i>
                {{ 'SUPPLIERS.NEW_SUPPLIER' | translate }}
            </button>
        </div>

        <!-- Search Bar -->
        <div *ngIf="!showForm"
            class="flex flex-col sm:flex-row gap-4 items-center bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
            <div class="relative w-full sm:w-96">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <i class="fas fa-search text-gray-400"></i>
                </div>
                <input type="search" [(ngModel)]="searchTerm" (input)="onSearch()"
                    class="block w-full pl-11 pr-4 py-2.5 border border-gray-200 rounded-lg bg-gray-50 placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-400 sm:text-sm transition-all duration-200"
                    [placeholder]="'SUPPLIERS.SEARCH_PLACEHOLDER' | translate" />
            </div>
        </div>

        <!-- Form (Create/Edit) -->
        <div *ngIf="showForm" class="animate__animated animate__fadeInUp animate__faster">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 w-full max-w-4xl mx-auto overflow-hidden">

                <!-- Form Header -->
                <div
                    class="px-8 py-6 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-emerald-50/50 to-white">
                    <div>
                        <h2 class="text-xl font-bold text-gray-900">{{ formTitle | translate }}</h2>
                        <p class="text-gray-500 text-sm mt-1">{{ 'SUPPLIERS.MANAGEMENT' | translate }}</p>
                    </div>
                    <button
                        class="w-8 h-8 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors"
                        (click)="closeForm()">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>

                <!-- Form Body -->
                <div class="p-8">
                    <form (ngSubmit)="onSubmit()">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                            <!-- Name -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.NAME' | translate }} <span class="text-red-500">*</span>
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="far fa-building"></i>
                                    </div>
                                    <input type="text" [(ngModel)]="currentSupplier.name" name="name" required
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.NAME' | translate" />
                                </div>
                            </div>

                            <!-- Contact Person -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.CONTACT_PERSON' | translate }}
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="far fa-user"></i>
                                    </div>
                                    <input type="text" [(ngModel)]="currentSupplier.contact_person"
                                        name="contact_person"
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.CONTACT' | translate" />
                                </div>
                            </div>

                            <!-- Email -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.EMAIL' | translate }}
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="far fa-envelope"></i>
                                    </div>
                                    <input type="email" [(ngModel)]="currentSupplier.email" name="email"
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.EMAIL' | translate" />
                                </div>
                            </div>

                            <!-- Phone -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.PHONE' | translate }}
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="fas fa-phone-alt"></i>
                                    </div>
                                    <input type="tel" [(ngModel)]="currentSupplier.phone" name="phone"
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.PHONE' | translate" />
                                </div>
                            </div>

                            <!-- Address -->
                            <div class="col-span-1 md:col-span-2 space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.ADDRESS' | translate }}
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </div>
                                    <input type="text" [(ngModel)]="currentSupplier.address" name="address"
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.ADDRESS' | translate" />
                                </div>
                            </div>

                            <!-- Website -->
                            <div class="col-span-1 md:col-span-2 space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.WEBSITE' | translate }}
                                </label>
                                <div class="relative group">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors">
                                        <i class="fas fa-globe"></i>
                                    </div>
                                    <input type="url" [(ngModel)]="currentSupplier.website" name="website"
                                        class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300"
                                        [placeholder]="'SUPPLIERS.PLACEHOLDERS.WEBSITE' | translate" />
                                </div>
                            </div>

                            <!-- Notes -->
                            <div class="col-span-1 md:col-span-2 space-y-2">
                                <label class="block text-sm font-semibold text-gray-700">
                                    {{ 'SUPPLIERS.NOTES' | translate }}
                                </label>
                                <textarea [(ngModel)]="currentSupplier.notes" name="notes" rows="4"
                                    class="w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all text-gray-900 placeholder-gray-400 outline-none hover:border-gray-300 resize-none"
                                    [placeholder]="'SUPPLIERS.PLACEHOLDERS.NOTES' | translate"></textarea>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="mt-8 flex items-center justify-end gap-3 pt-6 border-t border-gray-100">
                            <button type="button" (click)="closeForm()"
                                class="px-6 py-2.5 bg-white border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors">
                                {{ 'COMMON.CANCEL' | translate }}
                            </button>
                            <button type="submit" [disabled]="isSubmitting"
                                class="px-8 py-2.5 bg-emerald-500 text-white font-semibold rounded-xl hover:bg-emerald-600 shadow-md shadow-emerald-200 transition-all disabled:opacity-50 disabled:shadow-none flex items-center gap-2">
                                <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin"></i>
                                <span>{{ (isSubmitting ? 'COMMON.SAVING' : (currentSupplier.id ? 'COMMON.UPDATE' :
                                    'SUPPLIERS.NEW_SUPPLIER' )) | translate }}</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading && !showForm"
            class="bg-white rounded-xl border border-gray-200 shadow-sm p-12 flex flex-col items-center justify-center gap-3">
            <div class="w-10 h-10 border-4 border-gray-200 border-t-emerald-500 rounded-full animate-spin"></div>
            <p class="text-gray-500 text-sm">{{ 'COMMON.LOADING' | translate }}...</p>
        </div>

        <!-- Table -->
        <div *ngIf="!isLoading && !showForm"
            class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider">
                                {{ 'SUPPLIERS.NAME' | translate }}
                            </th>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider">
                                {{ 'SUPPLIERS.CONTACT_PERSON' | translate }}
                            </th>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider">
                                {{ 'SUPPLIERS.EMAIL' | translate }}
                            </th>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider">
                                {{ 'SUPPLIERS.PHONE' | translate }}
                            </th>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center">
                                {{ 'SUPPLIERS.PRODUCTS_COUNT' | translate }}
                            </th>
                            <th class="px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right">
                                {{ 'COMMON.ACTIONS' | translate }}
                            </th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        <tr *ngFor="let supplier of suppliers" class="hover:bg-gray-50/70 transition-colors group">
                            <td class="px-6 py-4">
                                <div class="flex items-center gap-3">
                                    <div
                                        class="w-9 h-9 rounded-lg bg-emerald-50 border border-emerald-100 flex items-center justify-center text-emerald-600 flex-shrink-0">
                                        <i class="fas fa-building text-sm"></i>
                                    </div>
                                    <span class="font-semibold text-gray-900 text-sm">{{ supplier.name }}</span>
                                </div>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-600">{{ supplier.contact_person || '-' }}</td>
                            <td class="px-6 py-4 text-sm text-gray-500">{{ supplier.email || '-' }}</td>
                            <td class="px-6 py-4 text-sm text-gray-600">{{ supplier.phone || '-' }}</td>
                            <td class="px-6 py-4 text-center">
                                <span
                                    class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-emerald-500 text-white text-xs font-bold shadow-sm">
                                    {{ supplier._count?.products || 0 }}
                                </span>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex items-center justify-end gap-2">
                                    <button (click)="openEditForm(supplier)"
                                        class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400 hover:text-emerald-600 hover:border-emerald-200 hover:bg-emerald-50 transition-all duration-200"
                                        title="Edit">
                                        <i class="fas fa-pen text-xs"></i>
                                    </button>
                                    <button (click)="deleteSupplier(supplier)"
                                        class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400 hover:text-red-600 hover:border-red-200 hover:bg-red-50 transition-all duration-200"
                                        title="Delete">
                                        <i class="fas fa-trash-alt text-xs"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Empty state -->
            <div *ngIf="suppliers.length === 0" class="py-16 text-center">
                <div class="w-16 h-16 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-4">
                    <i class="fas fa-truck text-2xl text-gray-300"></i>
                </div>
                <p class="text-gray-500 font-medium">{{ 'SUPPLIERS.NO_SUPPLIERS' | translate }}</p>
            </div>
        </div>

        <!-- Pagination -->
        <div *ngIf="!isLoading && !showForm && suppliers.length > 0"
            class="flex flex-col sm:flex-row items-center justify-between gap-4 pt-2">
            <p class="text-sm text-gray-500">
                {{ 'COMMON.SHOWING' | translate }} {{ ((currentPage - 1) * pageSize) + 1 }} - {{ currentPage * pageSize
                > totalItems ? totalItems : currentPage * pageSize }} {{ 'COMMON.OF' | translate }} {{ totalItems }} {{
                'SUPPLIERS.TITLE' | translate | lowercase }}
            </p>
            <div class="flex items-center gap-1">
                <button (click)="previousPage()" [disabled]="currentPage === 1"
                    class="w-9 h-9 rounded-lg border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:text-gray-700 transition-colors disabled:opacity-40 disabled:cursor-not-allowed">
                    <i class="fas fa-chevron-left text-xs"></i>
                </button>
                <span
                    class="w-9 h-9 rounded-lg bg-emerald-500 text-white flex items-center justify-center text-sm font-bold shadow-sm">
                    {{ currentPage }}
                </span>
                <button (click)="nextPage()" [disabled]="currentPage >= totalPages"
                    class="w-9 h-9 rounded-lg border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:text-gray-700 transition-colors disabled:opacity-40 disabled:cursor-not-allowed">
                    <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

    </div>
</div>